<template>
    <template if:true={isLoading}>
        <div class="slds-m-top_medium slds-m-bottom_medium slds-is-relative" >
            <lightning-spinner alternative-text="Loading" size="medium" variant="brand"></lightning-spinner>
        </div>
    </template>
    <template if:false={isLoading}>
        <lightning-accordion allow-multiple-sections-open active-section-name={activeSections}>
            <template for:each={contas} for:item="conta">
                <lightning-accordion-section key={conta.id} name={conta.nome} label={conta.nome}>
                    <div class="slds-m-top_medium slds-box slds-text-heading_small">
                        <div class="slds-grid slds-gutters slds-wrap">
                            <div class="slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_4-of-12">
                                <lightning-icon icon-name="standard:user" size="small"></lightning-icon>
                                <span class="slds-m-left_small slds-text-heading_medium">{conta.nome}</span>
                            </div>
                        </div>
                        
                        <div class="slds-m-top_medium">
                            <lightning-accordion allow-multiple-sections-open active-section-name={activeSections}>
                                <lightning-accordion-section name="Identificação" label="Identificação">
                                    <c-checklist-documentos 
                                        onatualizarchecklist={handleAtualizarChecklist}
                                        uploadedfiles={uploadedFiles} 
                                        documentos={conta.documentosIdentificacao}>
                                    </c-checklist-documentos>
                                </lightning-accordion-section>
                                    
                                <lightning-accordion-section name="Imóvel" label="Imóvel">
                                    <c-checklist-documentos 
                                        onatualizarchecklist={handleAtualizarChecklist}
                                        uploadedfiles={uploadedFiles} 
                                        documentos={conta.documentosImovel}>
                                    </c-checklist-documentos>
                                </lightning-accordion-section>
                                
                                <lightning-accordion-section name="Veículo" label="Veículo">
                                    <c-checklist-documentos 
                                        onatualizarchecklist={handleAtualizarChecklist}
                                        uploadedfiles={uploadedFiles} 
                                        documentos={conta.documentosVeiculo}>
                                    </c-checklist-documentos>
                                </lightning-accordion-section>
                            </lightning-accordion>
                        </div>
                    </div>
                </lightning-accordion-section>
            </template>
        </lightning-accordion>
    </template>
</template>